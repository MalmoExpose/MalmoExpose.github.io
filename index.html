<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expose Hub</title>
<style>
body { background:#f38218; font-family:Arial,sans-serif; margin:0; padding:20px; }
h1 { text-align:center; font-size:3rem; color:#000; }
.tab-buttons { text-align:center; margin-bottom:20px; }
.tab-buttons button { padding:12px 24px; margin:0 10px; font-size:1rem; border:none; border-radius:8px; cursor:pointer; background:#fff; transition:.2s; }
.tab-buttons .active { background:#000; color:#fff; }
.tab-content { display:none; margin-top:25px; text-align:center; }
.tab-content.active { display:block; }
.grid { display:grid; grid-template-columns:repeat(2,1fr); gap:20px; justify-items:center; }
.item-container { text-align:center; }
video,img { width:100%; max-width:300px; height:500px; border-radius:10px; object-fit:contain; background:#000; }
.title { margin-top:10px; font-size:1.1rem; font-weight:bold; }
.description { font-size:0.9rem; color:#333; }
#addBtn { position:fixed;bottom:20px;right:20px;width:60px;height:60px;border-radius:50%;border:none;background:#000;color:#fff;font-size:2rem;cursor:pointer; }
#popup { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; padding:20px; border-radius:10px; width:320px; box-shadow:0 0 10px rgba(0,0,0,0.4); text-align:center; }
#popup input, #popup select { width:100%; padding:6px; margin-bottom:10px; }
#popup button { width:100%; padding:10px; background:#000; color:#fff; border:none; border-radius:5px; cursor:pointer; }
#previewVideo, #previewImg { display:none; width:100%; margin-bottom:10px; }
@media(max-width:700px){ .grid { grid-template-columns:1fr; } }
</style>
</head>
<body>

<h1>Expose Hub</h1>

<div class="tab-buttons">
<button class="tab-btn active" data-tab="malmo">Malmö</button>
<button class="tab-btn" data-tab="other">Andra städer</button>
</div>

<hr>

<div id="malmo" class="tab-content active">
  <div class="grid" id="mainGrid"></div>
</div>
<div id="other" class="tab-content">
  <p style="font-size:1.2rem;color:#000;">Inga objekt ännu.</p>
</div>

<button id="addBtn">+</button>

<div id="popup">
<h3>Lägg till</h3>
<select id="uploadType">
<option value="video">Video</option>
<option value="photo">Photo</option>
</select>
<input id="fileInput" type="file" accept="video/*,image/*">
<input id="titleInput" type="text" placeholder="Titel">
<input id="descInput" type="text" placeholder="Beskrivning">
<video id="previewVideo" controls></video>
<img id="previewImg">
<button id="confirmAdd">Lägg till</button>
</div>

<script>
// Discord webhook URL
const webhookURL = "https://discord.com/api/webhooks/1441087288707780820/9msV4HQIMgzzmF_ln1hNFlRaD7GZpHGZnB742FgO0dVj21xcWsNRKBsrLWhKyp0DZylt";

const mainGrid = document.getElementById('mainGrid');
const addBtn = document.getElementById('addBtn');
const popup = document.getElementById('popup');
const previewVideo = document.getElementById('previewVideo');
const previewImg = document.getElementById('previewImg');
const fileInput = document.getElementById('fileInput');

addBtn.onclick = () => popup.style.display = 'block';
fileInput.onchange = () => {
  const file = fileInput.files[0];
  if(!file) return;
  const url = URL.createObjectURL(file);
  const type = document.getElementById('uploadType').value;
  if(type==='video'){ previewVideo.src=url; previewVideo.style.display='block'; previewImg.style.display='none'; }
  else { previewImg.src=url; previewImg.style.display='block'; previewVideo.style.display='none'; }
};

document.getElementById('confirmAdd').onclick = async () => {
  const type = document.getElementById('uploadType').value;
  const file = fileInput.files[0];
  const title = document.getElementById('titleInput').value || (type==='video'?'New Video':'New Photo');
  const desc = document.getElementById('descInput').value || '';
  if(!file) return alert('Välj en fil först!');

  // Discord webhook formdata
  const formData = new FormData();
  formData.append('file', file);
  formData.append('payload_json', JSON.stringify({content: `**${title}**\n${desc}`}));

  try {
    await fetch(webhookURL, { method:'POST', body:formData });
    addToGrid(type, URL.createObjectURL(file), title, desc);
  } catch(err) { alert('Upload misslyckades'); console.error(err); }

  popup.style.display='none';
  fileInput.value=''; document.getElementById('titleInput').value=''; document.getElementById('descInput').value='';
  previewVideo.style.display='none'; previewImg.style.display='none';
};

function addToGrid(type, url, title, desc){
  const div = document.createElement('div'); div.className='item-container';
  if(type==='video') div.innerHTML=`<video controls src="${url}"></video><div class="title">${title}</div><div class="description">${desc}</div>`;
  else div.innerHTML=`<img src="${url}"><div class="title">${title}</div><div class="description">${desc}</div>`;
  mainGrid.prepend(div);
}

// Tabs
document.querySelectorAll('.tab-btn').forEach(btn=>{btn.onclick=()=>{
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById(btn.dataset.tab).classList.add('active');
}});
</script>

</body>
</html>
